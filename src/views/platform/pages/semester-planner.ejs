<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SG Platform</title>
    <link rel="shortcut icon" type="image/png" href="/platform/assets/images/logos/favicon.png" />
    <link rel="stylesheet" href="/platform/assets/css/styles.css" />
    <link rel="stylesheet" href="/platform/assets/css/dataTables.css" />

    <style>
        @import url('https://fonts.googleapis.com/css?family=Roboto');
    
    /* Define color variables for easier management */
    :root {
      --blue: #3498db;
      --purple: #9b59b6;
      --navy: #0c3862;
      --green: #2ecc71;
      --red: #e74c3c;
      --orange: linear-gradient(to right, #F2994A, #F2C94C);
      --light-gray: #eff0f1;
      --white: #fff;
      --black: #000;
    }
    
    
    body {
      font-family: 'Roboto', sans-serif;
      background: #f7f7f7;
      margin: 0;
    }
    
    .table-container {
      overflow-x: auto;
      overflow-y: auto;
      max-width: 100%;
      margin: 20px auto;
      display: grid; /* Apply grid layout to the element */
  justify-items: center; /* Align items along the horizontal axis (main axis) */
  align-self: center; /* Align the element itself along the vertical axis */


    }

    .modal-lg {
    max-width: 90%;
  }

  .modal-body {
    padding: 15px;
  }

  .embed-responsive {
    position: relative;
    height: 0;
    overflow: hidden;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
  }

  .embed-responsive-item {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
    
    .ams {
      width: 100%;
      border-collapse: collapse;
      border-spacing: 0;
      text-align: center;
    }
    
    .ams th, .ams td {
      padding: 10px;
      text-align: left;
      width: calc(100% / 7);
      height: 100px;
      white-space: nowrap;
      text-align: center;
      white-space: normal; /* Allows the text to wrap to a new line */
  word-wrap: break-word; /* Breaks long words onto a new line */
  overflow-wrap: break-word; /* Ensures words break and wrap to the next line */
    }
    
    
    .ams tr.time {
      width: 3em !important;
    }
    
    .ams tr td {
      background: #f8f8f8;
      border-bottom: 1px solid var(--light-gray);
      border:1px solid #dddddd;
    }
    .ams tr .lunch{
        border:none;
        background:#d3e2b0;
        color:#252421;
        overflow: hidden;
        text-align:right;
        font-size: 1.1em;
    }
    /* 
    tr:nth-child(odd) td {
      background: var(--light-gray);
    } */
    
    /* Adjust tooltip styles */
    /* [data-tooltip] {
      position: relative;
      cursor: pointer;
    }
    
    [data-tooltip]:before,
    [data-tooltip]:after {
      opacity: 0;
      transition: opacity 0.5s;
      position: absolute;
      z-index: 2;
    }
    
    [data-tooltip]:before {
      content: attr(data-tooltip);
      background: var(--black);
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      bottom: -78%;
      left: 50%;
      transform: translateX(-50%);
    }
    
    [data-tooltip]:after {
      content: "";
      border-style: solid;
      border-width: 5px 5px 0;
      border-color: var(--black) transparent transparent transparent;
      bottom: 110%;
      left: 50%;
      transform: translateX(-50%);
    }
    
    [data-tooltip]:hover:before,
    [data-tooltip]:hover:after {
      opacity: 1;
    } */
    .ams tr .bg{
        background:#faf6e3;
        color:#000;
        max-width:100px;
        font-size:0.8em;
    }
    
    /* Change background color of cell on hover to simulate selection */
    
    /* Add this rule to adjust text color in alternating rows */
    /* tr:nth-child(odd) td {
      background: var(--light-gray);
      color: var(--navy); 
    } */
    
    /* Specify the text color for the header row */
    .ams .days, .ams tr .time {
      background: var(--navy);
      color: white;
      font-size: 0.95em;
      text-align: center;
      border:1px solid white;
    }
    .ams tr .time {
        text-transform: uppercase;

    }
    .ams .days th{
        border:1px solid white;
        height:60px;
    }

    #pills-tab li .active{
        background:#0c3862;
        color:white;
    }
    .closeAlert {
            top: 1%;
            right: 0.5%;
            position: absolute;
            background:transparent;
            border:none;
            margin:5px;
            font-size: 1.2em;
        }
        .close {
            top: 0.5%;
            right: 2%;
            position: absolute;
            /* background:rgb(113, 82, 82); */
            background:transparent;
            border:none;
            margin:5px;
            /* width:10px;
            height:10px; */
            font-size: 1.2em;
        }

        /* Customizing the modal close button */
.custom-close {
    font-size: 1.5rem;
    font-weight: bold;
    color: black;
    opacity: 1;
    transition: color 0.3s, transform 0.3s;
    border:none;
    background:transparent;
    float:right;
    position: absolute;
}
.modal-header{
    text-align:right;
    justify-content: flex-end; /* Right align the items */
    margin-top:10px;
}

.custom-close:hover, .custom-close:focus {
    color: #5d86ff;
    transform: rotate(90deg);
}

        .cmsDescp{
            margin:15px 0;
        }
        #modal-dp div strong{
            font-weight: 900;
        }

        </style>

    <style>
        @media screen {
          .scroll {
            display:block;
            overflow-x: auto;
          }
        }
        @media only screen and (max-width: 600px) {
            .small-pills{
                font-size:14.5px;
                margin-left:-3px;
                position:relative;
                right:4px;
            }
        }

        @media only screen and (max-width: 500px) {
            .small-pills{
                font-size:14px;
                margin-left:-3px;
                position:relative;
                right:4px;
            }
        }

        @media only screen and (max-width: 400px) {
            .small-pills{
                font-size:9px;
                margin-left:-3px;
                position:relative;
                right:4px;
            }
        }
        @media only screen and (max-width: 350px) {
            .small-pills{
                font-size:8.5px;
                margin-left:-3px;
                position:relative;
                right:4px;
            }
        }

     #example_filter label input {
      display: block;
      width: 70vw;
      margin: 20px 10px;
      padding: 7px 25px;
      font-size: 1.3em;
      border: 1 px solid black;
      border-radius: 30px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      outline: none;
      transition: box-shadow 0.3s ease;
    }
    
    #example_filter label input:focus {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
      animation: glow 1s infinite alternate;
    }
    
    #example_filter label input::placeholder {
      color: #aaa;
      font-size:0.9em
    }
    
    #example_filter label input:focus::placeholder {
      color: #888;
    }
    
    @keyframes glow {
      0% {
        box-shadow: 0 0 5px #9b59b6;
      }
      50% {
        box-shadow: 0 0 20px #e74c3c;
      }
      100% {
        box-shadow: 0 0 5px #9b59b6;
      }
    }
    #example{
        overflow: scroll;
         /* Prevent scrollbar appearance */

    }
    .add-course{
        opacity:0.65;
        cursor:default;
        background:transparent;
    }

    @keyframes dance {
        0% { transform: translateX(0); }
        25% { transform: translateX(10px); }
        50% { transform: translateX(-10px); }
        75% { transform: translateX(10px); }
        100% { transform: translateX(0); }
    }

    .dancing-row {
        animation: dance 0.5s ease-in-out;
    }

    .add-course:hover {
        opacity: 1;
        transition: transform 0.3s ease-in-out;
        transform: scale(1.3) rotate(90deg);
        stroke: #5d86ff; /* Change stroke color on hover */
        cursor: pointer;
    }
    .add-course path {
        transition: stroke 0.3s ease-in-out;
    }

    .add-course:hover path {
        stroke: #5d86ff; /* Change stroke color on hover */
    }
    .add-course:hover td{
        opacity:1;   
    }

      </style>
    <%-include("../partials/preloader-css")%>
    <%-include("../partials/preloader-js")%>

</head>
<%-include("../partials/post-head")%>


    <body>
        <%-include("../partials/preloader")%>
            <!--  Body Wrapper -->
            <div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full" data-sidebar-position="fixed" data-header-position="fixed">
                <%-include("../partials/sidebar")%>
                    <!--  Main wrapper -->
                    <div class="body-wrapper">
                        <%-include("../partials/header")%>
                            <div class="container-fluid">
                                <div class="container-fluid">
                                    <div class="row justify-content-between">
                                        <div class="card">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div>
                                                        <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                                                             <li class="nav-item" role="presentation">
                                                                <button onclick="changeTimetableTo('instructions')" class="nav-link small-pills" id="pills-instructions-tab" data-bs-toggle="pill" data-bs-target="#pills-instructions" type="button" role="tab" aria-controls="pills-instructions" aria-selected="true">
                                                                   Instructions
                                                                </button>
                                                            </li>
                                                            <li class="nav-item" role="presentation">
                                                              <button onclick="changeTimetableTo(1)" class="nav-link small-pills active" id="pills-1-tab" data-bs-toggle="pill" data-bs-target="#pills-1" type="button" role="tab" aria-controls="pills-1" aria-selected="true">1</button>
                                                            </li>
                                                            <li class="nav-item" role="presentation">
                                                              <button onclick="changeTimetableTo(2)" class="nav-link small-pills" id="pills-2-tab" data-bs-toggle="pill" data-bs-target="#pills-2" type="button" role="tab" aria-controls="pills-2" aria-selected="false">2</button>
                                                            </li>
                                                            <li class="nav-item" role="presentation">
                                                              <button onclick="changeTimetableTo(3)" class="nav-link small-pills" id="pills-3-tab" data-bs-toggle="pill" data-bs-target="#pills-3" type="button" role="tab" aria-controls="pills-3" aria-selected="false">3</button>
                                                            </li>
                                                            <li class="nav-item" role="presentation">
                                                              <button onclick="changeTimetableTo(4)" class="nav-link small-pills" id="pills-4-tab" data-bs-toggle="pill" data-bs-target="#pills-4" type="button" role="tab" aria-controls="pills-4" aria-selected="false">4</button>
                                                            </li>
                                                            <li class="nav-item" role="presentation">
                                                              <button onclick="changeTimetableTo(5)" class="nav-link small-pills" id="pills-5-tab" data-bs-toggle="pill" data-bs-target="#pills-5" type="button" role="tab" aria-controls="pills-5" aria-selected="false">5</button>
                                                            </li>
                                                        </ul>
                                                        <a class="btn" data-bs-toggle="modal" data-bs-target="#videoModal">
                                                            <svg fill="#000000" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                                                                width="30px" height="30px" viewBox="0 0 466 466" xml:space="preserve">
                                                            <g>
                                                                <g>
                                                                <g>
                                                                    <path d="M370.001,26.35H18.5C8.282,26.35,0,34.633,0,44.85v289.477c0,10.218,8.282,18.5,18.5,18.5h262.662l-20.326-23.571
                                                                    h-48.548v-29.603h25.435l-0.183-0.224c-6.49-7.407-10.784-15.061-12.85-22.429H44.4V102.175h299.7V277h-40.213
                                                                    c6.104,6.485,12.491,13.053,17.853,18.368c3.759-3.521,8.191-7.416,13.159-11.314c16.925-13.288,33.388-21.414,48.932-24.151
                                                                    c1.562-0.274,3.121-0.479,4.672-0.647V44.85C388.501,34.633,380.219,26.35,370.001,26.35z M129.038,299.653h47.175v29.601
                                                                    h-47.175V299.653z M45.787,299.653h47.176v29.601H45.787V299.653z M92.963,79.521H45.787v-29.6h47.176V79.521z M176.213,79.521
                                                                    h-47.175v-29.6h47.175V79.521z M259.463,79.521h-47.175v-29.6h47.175V79.521z M342.713,79.521h-47.175v-29.6h47.175V79.521z"/>
                                                                    <path d="M464.662,354.325c-4.595-24.766-20.357-47.662-29.344-59.11c-12.191-15.53-27.666-21.767-45.99-18.538
                                                                    c-13.086,2.305-27.307,9.429-42.271,21.177c-10.572,8.303-18.558,16.611-22.088,20.479c-8.874-7.644-33.651-33.175-45.816-47.571
                                                                    c-6.109-7.229-21.865-22.604-33.621-11.991c-12.654,12.301,5.882,32.396,6.362,32.979l74.362,91.024
                                                                    c-0.301,0.402-0.637,0.752-1.021,1.055c-7.133,5.601-27.943-4.69-36.344-10.245c-7.68-5.076-20.609-5.037-27.137,0.086
                                                                    c-2.612,2.053-4.06,4.842-4.075,7.854c-0.021,4.338,2.815,8.82,8.422,13.313c0.063,0.051,0.177,0.149,0.339,0.289
                                                                    c8.286,7.1,30.764,24.782,60.445,35.668c19.027,6.979,37.564,9.854,55.104,8.551c21.754-1.621,42.023-9.693,60.246-24
                                                                    C461.781,399.991,469.327,379.461,464.662,354.325z"/>
                                                                    <path d="M175.976,127.423c-2.845-2.387-6.815-2.905-10.183-1.335c-3.365,1.57-5.517,4.948-5.517,8.662v100.833
                                                                    c0,3.715,2.151,7.092,5.517,8.661c1.291,0.604,2.671,0.897,4.042,0.897c2.204,0,4.386-0.763,6.141-2.233l60.163-50.416
                                                                    c2.168-1.817,3.42-4.501,3.42-7.328s-1.252-5.511-3.42-7.327L175.976,127.423z"/>
                                                                </g>
                                                                </g>
                                                            </g>
                                                            </svg>
                                                        </a>
                                                        <button class="btn btn-primary" style="float:right;background:#0c3862;border:none;" class="nav-link active" type="button" id="download-snapshot">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                                                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
                                                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
                                                          </svg>
                                                           Snapshot</button>
                                                        <br /><br />
                                                          <div class="tab-content" id="pills-tabContent">
                                                            <div style="text-align:center">
                                                                <h2 style="margin:auto" id="heading-tab">Timetable 1</h5>

                                                            </div>
                                                            <div class="tab-pane fade" id="pills-instructions" role="tabpanel" aria-labelledby="pills-instructions-tab">

                                                                <p>Welcome to the Timetable Planner! This tool is designed to help you efficiently plan and manage your course schedule. With this planner, you can search for courses, add them to your timetable, and view multiple timetables simultaneously to compare different scheduling options. Below are the detailed instructions to help you get started:</p>

                                                                <h5>Searching for Courses</h5>
                                                                <p>To begin, you can search for courses using the search bar located at the top of the page. Simply type in the course code or course title, and a list of matching courses will appear. This feature helps you quickly find the courses you need without having to scroll through the entire list.</p>

                                                                <h5>Adding Courses to Your Timetable</h5>
                                                                <p>Once you have found the course you want to add, click on the course to add it to the timetable. You will also be able see information such as the course title, faculty name, and the class schedule. The course will be added to the appropriate slot in your timetable based on its schedule.</p>

                                                                <h5>Handling Schedule Clashes</h5>
                                                                <p>If there is a scheduling conflict, meaning another course is already scheduled at the same time, you will be notified with a clash alert. The system will highlight the conflicting course and provide details about the clash. You can then decide whether to keep both courses or make adjustments to resolve the conflict. This feature ensures that you do not accidentally schedule overlapping classes.</p>

                                                                <h5>Maintaining Multiple Timetables</h5>
                                                                <p>The Timetable Planner allows you to maintain up to five different timetables simultaneously. This is useful if you want to compare different scheduling options or if you are considering enrolling in different sets of courses. To switch between timetables, use the tabs at the top of the timetable section. Each tab represents a different timetable, and you can easily switch between them to see how different schedules work for you.</p>

                                                                <h5>Downloading a Snapshot of Your Timetable</h5>
                                                                <p>Once you have finalized your timetable, you can download a snapshot of it for your reference. To do this, click the "Download Snapshot" button located below the timetable. This will generate a PNG file of your current timetable, which you can save or print. Having a physical copy of your timetable can be very handy for quick reference during the semester.</p>

                                                                <h5>Example: Using the Timetable Planner</h5>
                                                                <div class="highlight">
                                                                    <p>Here is a step-by-step example to illustrate how you can use the Timetable Planner:</p>
                                                                    <ol>
                                                                        <li>Search for "imroze" in the search bar.</li>
                                                                        <li>Click on "Exploring Life in the Neighborhood Lab" to add it to the timetable.</li>
                                                                        <li>If a clash occurs, review the conflicting course and decide whether to keep both courses or make changes.</li>
                                                                        <li>If needed, remove the course by clicking the cross icon from the list of courses at the bottom of the timetable (yellow alerts).</li>
                                                                        <li>Switch to a different timetable tab to explore other scheduling options.</li>
                                                                        <li>Once satisfied with your timetable, click the "Download Snapshot" button to save a PNG copy.</li>
                                                                    </ol>
                                                                </div>

                                                                <h5>Conclusion</h5>
                                                                <p>The Timetable Planner is a powerful tool that simplifies the process of creating and managing your course schedule. By following the instructions above, you can effectively use the planner to ensure a well-organized and clash-free timetable. We hope this tool helps you have a productive and well-planned semester!</p>

                                                            </div>
                                                            <div class="tab-pane fade show active" id="pills-1" role="tabpanel" aria-labelledby="pills-1-tab">
                                                                <div id="table-container1" class='table-container'>
                                                                    <table class="table-responsive ams" id="timetable1" border='0' cellpadding='0' cellspacing='0'>
                                                                        <tr class='days'>
                                                                            <th>Time</th>
                                                                            <th>Monday</th>
                                                                            <th>Tuesday</th>
                                                                            <th>Wednesday</th>
                                                                            <th>Thursday</th>
                                                                            <th>Friday</th>
                                                                            <th>Saturday</th>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>8:30 am-10:00 am</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>10:10 am-11:40 am</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>11:50 am-1:20 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>1:20 pm-3:00 pm</td>
                                                                            <td class='lunch'>L</td>
                                                                            <td class='lunch'>U</td>
                                                                            <td class='lunch'>N</td>
                                                                            <td class='lunch'>C</td>
                                                                            <td class='lunch'>H</td>
                                                                            <td class='lunch' ></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>3:00 pm-4:30 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>4:40 pm-6:10 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>6:20 pm-7:50 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>8:00 pm-9:30 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                    </table>
                                                                </div>
                                                                <div style="width:100%;text-align:left"><br /><h5>Courses:</h5></div>

                                                            </div>
                                                            <div class="tab-pane fade" id="pills-2" role="tabpanel" aria-labelledby="pills-2-tab">
                                                                <div id="table-container2" class='table-container'>
                                                                    <table class="table-responsive ams" id="timetable2" border='0' cellpadding='0' cellspacing='0'>
                                                                        <tr class='days'>
                                                                            <th>Time</th>
                                                                            <th>Monday</th>
                                                                            <th>Tuesday</th>
                                                                            <th>Wednesday</th>
                                                                            <th>Thursday</th>
                                                                            <th>Friday</th>
                                                                            <th>Saturday</th>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>8:30 am-10:00 am</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>10:10 am-11:40 am</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>11:50 am-1:20 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>1:20 pm-3:00 pm</td>
                                                                            <td class='lunch'>L</td>
                                                                            <td class='lunch'>U</td>
                                                                            <td class='lunch'>N</td>
                                                                            <td class='lunch'>C</td>
                                                                            <td class='lunch'>H</td>
                                                                            <td class='lunch' ></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>3:00 pm-4:30 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>4:40 pm-6:10 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>6:20 pm-7:50 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>8:00 pm-9:30 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                    </table>
                                                                </div>
                                                                <div style="width:100%;text-align:left"><br /><h5>Courses:</h5></div>
                                                            </div>
                                                            <div class="tab-pane fade" id="pills-3" role="tabpanel" aria-labelledby="pills-3-tab">
                                                                <div id="table-container3" class='table-container'>
                                                                    <table class="table-responsive ams" id="timetable3" border='0' cellpadding='0' cellspacing='0'>
                                                                        <tr class='days'>
                                                                            <th>Time</th>
                                                                            <th>Monday</th>
                                                                            <th>Tuesday</th>
                                                                            <th>Wednesday</th>
                                                                            <th>Thursday</th>
                                                                            <th>Friday</th>
                                                                            <th>Saturday</th>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>8:30 am-10:00 am</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>10:10 am-11:40 am</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>11:50 am-1:20 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>1:20 pm-3:00 pm</td>
                                                                            <td class='lunch'>L</td>
                                                                            <td class='lunch'>U</td>
                                                                            <td class='lunch'>N</td>
                                                                            <td class='lunch'>C</td>
                                                                            <td class='lunch'>H</td>
                                                                            <td class='lunch' ></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>3:00 pm-4:30 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>4:40 pm-6:10 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>6:20 pm-7:50 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>8:00 pm-9:30 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                    </table>
                                                                </div>
                                                                <div style="width:100%;text-align:left"><br /><h5>Courses:</h5></div>

                                                            </div>
                                                            <div class="tab-pane fade" id="pills-4" role="tabpanel" aria-labelledby="pills-4-tab">
                                                                <div id="table-container4" class='table-container'>
                                                                    <table class="table-responsive ams" id="timetable4" border='0' cellpadding='0' cellspacing='0'>
                                                                        <tr class='days'>
                                                                            <th>Time</th>
                                                                            <th>Monday</th>
                                                                            <th>Tuesday</th>
                                                                            <th>Wednesday</th>
                                                                            <th>Thursday</th>
                                                                            <th>Friday</th>
                                                                            <th>Saturday</th>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>8:30 am-10:00 am</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>10:10 am-11:40 am</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>11:50 am-1:20 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>1:20 pm-3:00 pm</td>
                                                                            <td class='lunch'>L</td>
                                                                            <td class='lunch'>U</td>
                                                                            <td class='lunch'>N</td>
                                                                            <td class='lunch'>C</td>
                                                                            <td class='lunch'>H</td>
                                                                            <td class='lunch' ></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>3:00 pm-4:30 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>4:40 pm-6:10 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>6:20 pm-7:50 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>8:00 pm-9:30 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                    </table>
                                                                </div>
                                                                <div style="width:100%;text-align:left"><br /><h5>Courses:</h5></div>

                                                            </div>
                                                            <div class="tab-pane fade" id="pills-5" role="tabpanel" aria-labelledby="pills-5-tab">
                                                                <div id="table-container5" class='table-container'>
                                                                    <table class="table-responsive ams" id="timetable5" border='0' cellpadding='0' cellspacing='0'>
                                                                        <tr class='days'>
                                                                            <th>Time</th>
                                                                            <th>Monday</th>
                                                                            <th>Tuesday</th>
                                                                            <th>Wednesday</th>
                                                                            <th>Thursday</th>
                                                                            <th>Friday</th>
                                                                            <th>Saturday</th>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>8:30 am-10:00 am</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>10:10 am-11:40 am</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>11:50 am-1:20 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>1:20 pm-3:00 pm</td>
                                                                            <td class='lunch'>L</td>
                                                                            <td class='lunch'>U</td>
                                                                            <td class='lunch'>N</td>
                                                                            <td class='lunch'>C</td>
                                                                            <td class='lunch'>H</td>
                                                                            <td class='lunch' ></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>3:00 pm-4:30 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>4:40 pm-6:10 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>6:20 pm-7:50 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class='time'>8:00 pm-9:30 pm</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>
                                                                    </table>
                                                                </div>
                                                                <div style="width:100%;text-align:left"><br /><h5>Courses:</h5></div>

                                                            </div>
                                                          </div>

                                                          
                                                          
                                                    </div>
                                                    
                                                    
                                                    <!-- / College Timetable -->
                                                    

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                      
                                    <!-- Modal -->
                                    <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="custom-close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                              </button>
                                        </div>
                                        <div id="modal-dp" class="modal-body">
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                                        </div>
                                        </div>
                                    </div>
                                    </div>

                                    <!-- Modal -->
                                    <div class="modal fade bd-example-modal-sm" id="exampleModalSm" tabindex="-1" role="dialog" aria-labelledby="exampleModalSmTitle" aria-hidden="true">
                                        <div class="modal-dialog modal-sm" role="document">
                                            <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="custom-close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                  </button>
                                            </div>
                                            <div id="modal-dps" class="modal-body">
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                                            </div>
                                            </div>
                                        </div>
                                        </div>


                                    <div id="course-block" class="row justify-content-between">
                                        <div class="card">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="flex-row mb-2">
                                                          <span class="fs-6 fw-semibold">Click on the '+' Icon of the Course to Add It to the Timetable</span><br /><br />
                                                          <div><h6 style="color:rgb(201, 51, 51)">Data was last synced from the AMS on <%=obj.dateLastFetched%>, <%=obj.timeLastFetched%> </h6></div>
                                                        </div>
                                                        <br>
                                                        
                                                        <form>
                                                          <div class="row">
                                                            <div class="col-lg-6">
                                                              <select class="form-select" id="type" name="type">
                                                                <option value="" selected>Filter by Type of Courses</option>
                                                                <!-- <option value="2023">2023</option> -->
                                                                <option value="FC-">Foundation Courses</option>
                                                                <option value="CT-">Critical Thinking</option>
                                                                <option value="CVA&CLA&CPA">Co-curricular Courses</option>
                                                              </select>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                <select class="form-select" id="code" name="code">
                                                                    <option value="" selected>Filter by Department/Major</option>
                                                                    <option value="BIO-">Biology</option>
                                                                    <option value="CHM-">Chemistry</option>
                                                                    <option value="CS-">Computer Science</option>
                                                                    <option value="CS&ENT">Computer Science and Entrepreneurial Leadership</option>
                                                                    <option value="ECO-">Economics</option>
                                                                    <option value="ECO&FIN">Economics and Finance</option>
                                                                    <option value="ECO&HIS">Economics and History</option>
                                                                    <option value="ENG-">English</option>
                                                                    <option value="ENG&CW">English and Creative Writing</option>
                                                                    <option value="ENG&MS">English and Media Studies</option>
                                                                    <option value="ENG&PA">English and Performing Arts</option>
                                                                    <option value="ENT-">Entrepreneurship</option>
                                                                    <option value="ES-">Environmental Studies</option>
                                                                    <option value="FIN-">Finance</option>
                                                                    <option value="HIS-">History</option>
                                                                    <option value="HIS&IR">History &amp; International Relations</option>
                                                                    <option value="IR-">International Relations</option>
                                                                    <option value="MAT-">Mathematics</option>
                                                                    <option value="CS&MAT">Mathematics and Computer Science</option>
                                                                    <option value="PA-">Performing Arts</option>
                                                                    <option value="PHI-">Philosophy</option>
                                                                    <option value="CS&PHI">Philosophy and Computer Science</option>
                                                                    <option value="PHY-">Physics</option>
                                                                    <option value="POL-">Political Science</option>
                                                                    <option value="POL&SOC">Politics &amp; Society</option>
                                                                    <option value="POL&PHIL&ECO">Politics, Philosophy, Economics</option>
                                                                    <option value="PSY-">Psychology</option>
                                                                    <option value="PSY&PHIL">Psychology and Philosophy</option>
                                                                    <option value="SOA">Sociology and Anthropology</option>
                                                                    <option value="VA">Visual Arts</option>
                                                                </select>
                                                                
                                                            </div>
                                                          </div>
                                                        </form>
                                                        <br />
                                                        <!-- Button trigger modal -->
                                                        
                                                        <table id="example" class="table table-striped scroll">
                                                          <thead>
                                                              <tr>
                                                                  <th></th>
                                                                  <th>Course Code</th>
                                                                  <th>Course Title</th>
                                                                  <th>Faculty</th>
                                                                  <th>Description</th>
                                                                  <th>Prerequisites</th> 
                                                              </tr>
                                                          </thead>
                                                          <tbody>
                                                            <!-- <%for(i=0;i<courses.length;i++){%>
                                                              <tr style="width:100vw" class="add-course" onclick="checkAndUpdateTimetable('<%=courses[i].classCounts%>','<%=courses[i].classDetails[0]%>','<%=courses[i].courseTitle%>','<%=courses[i].courseCode%>')">
                                                                <td style="display:hidden">-</td>
                                                                  <td>
                                                                    <%=courses[i].courseCode.substring(0,25)%></td>
                                                                  <td><%=courses[i].courseTitle%> <br /><span style="font-size:10px"><%=courses[i].semester.charAt(0).toUpperCase()%><%=courses[i].semester.slice(1)%> <%=courses[i].year%></span></td>
                                                                  <td>
                                                                      <%= courses[i].faculty.substring(0, 8) %><%= courses[i].faculty.length > 8 ? '...' : '' %>
                                                                  </td>
                                                                </tr>
                                                              <%}%> -->
                                                            <%for(i=0;i<courses.length;i++){%>
                                                              <tr>
                                                                <td>
                                                                    <svg onclick="checkAndUpdateTimetable(this,'<%=courses[i].classCounts%>','<%=courses[i].classDetails[0]%>','<%=courses[i].courseTitle%>','<%=courses[i].courseCode%>');" class="add-course" width="25px" height="25px" viewBox="0 0 24 24" fill="#5d86ff" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M6 12H18M12 6V18" stroke="#5d86ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                                                                </td>
                                                                  <td>
                                                                    <%=courses[i].courseCode.substring(0,25)%>
                                                                </td>
                                                                  <td style="margin-right:300px"><%=courses[i].courseTitle.replaceAll(/&#39;/g, "'").replaceAll(/&#34;/g, '"')%> <br /><span style="font-size:10px"><%=courses[i].semester.charAt(0).toUpperCase()%><%=courses[i].semester.slice(1)%> <%=courses[i].year%></span>
                                                                </td>
                                                                  <td>
                                                                      <%= courses[i].faculty.substring(0, 20) %><%= courses[i].faculty.length > 20 ? '...' : '' %>
                                                                  </td>
                                                                  <td>
                                                                    <% let string = JSON.stringify(courses[i].description); %>
                                                                    <% string = Buffer.from(string).toString('base64');%>
                                                                    <a onclick="showDescription('<%=string%>')" href="#" data-toggle="modal" data-target="#exampleModalLong">
                                                                       view
                                                                    </a>
                                                                  </td> 
                                                                  <td>
                                                                    <%if(courses[i].prerequisites.length==0){%>
                                                                        NA
                                                                    <%}else{%>
                                                                        <% let string = JSON.stringify(courses[i].prerequisites); %>
                                                                        <% string = Buffer.from(string).toString('base64');%>
                                                                        <a href="#" onclick="showCoursePrerequisites('<%=string%>')" data-toggle="modal" data-target="#exampleModalSm">
                                                                            view
                                                                        </a>
                                                                    <% }%>
                                                                  </td> 
                                                                </tr>
                                                              <%}%>
                                                          </tbody>
                                                          <tfoot>
                                                              <tr>
                                                                <th></th>
                                                                <th>Course Code</th>
                                                                <th>Course Title</th>
                                                                <th>Faculty</th>
                                                                <th>Description</th>
                                                                <th>Prerequisites</th>
                                                              </tr>
                                                          </tfoot>
                                                      </table>

                                                        </div>
                                                      </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                     
                            </div>
                    </div>
            </div>
            <!-- JavaScript to stop video when modal is closed -->
<script>
    const videoModal = document.getElementById('videoModal');
    const videoIframe = document.getElementById('videoIframe');
  
    videoModal.addEventListener('hide.bs.modal', function () {
      // Pause the video by resetting the src attribute
      videoIframe.src = videoIframe.src;
    });
  </script>
            <script>
                var currentTimetable=1;
                const days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
                    const timeSlots = [
                        "08:30-10:00",
                        "10:10-11:40",
                        "11:50-13:20",
                        "13:20-15:00",
                        "15:00-16:30",
                        "16:40-18:10",
                        "18:20-19:50",
                        "20:00-21:30"
                    ];

                function changeTimetableTo(number){
                    if(number=="instructions"){
                        document.getElementById('heading-tab').style.display = 'none';
                        document.getElementById('download-snapshot').style.display = 'none';
                        document.getElementById('heading-tab').style.display = 'none';
                        document.getElementById('course-block').style.display = 'none';

                    }else{
                        currentTimetable=number;
                        document.getElementById('heading-tab').innerText = 'Timetable '+number;
                        document.getElementById('heading-tab').style.display = 'block';
                        document.getElementById('download-snapshot').style.display = 'block';
                        document.getElementById('heading-tab').style.display = 'block';
                        document.getElementById('course-block').style.display = 'block';
                    }
                }

                function checkClash(timetableNumber, day, timeSlot) {
                    const dayIndex = days.indexOf(day);
                    const timeSlotIndex = timeSlots.indexOf(timeSlot);
                    const table = document.querySelector("#timetable" + timetableNumber);
                    
                    if (dayIndex === -1 || timeSlotIndex === -1) {
                        console.error("Invalid day or time slot");
                        return { clash: true, course: "Invalid input" }; // Invalid input considered as a clash
                    }
                    
                    const row = table.rows[timeSlotIndex + 1]; // +1 to account for header row
                    const cell = row.cells[dayIndex + 1]; // +1 to account for time column
                    // Check if the cell is empty or has the 'bg' class
                    if (cell.classList.contains("bg") || cell.innerText.trim() !== "") {
                        if(["L","U","N","C","H"].includes(cell.innerText.trim())){
                            return [false, "" ]; // No clash
                        }
                        return [true, cell.innerText.trim()]; // Clash detected, return the inner text
                    }
                    
                    return [false, "" ]; // No clash
                }
                function danceRow(svgElement){
                    document.getElementById("example").style.overflowX="hidden";
                    document.getElementById("example").style.overflowY="hidden";
                    var row = svgElement.closest('tr');
                    // Add the animation class
                    row.classList.add("dancing-row");
                    // Remove the animation class after the animation completes
                    row.addEventListener('animationend', function() {
                        row.classList.remove("dancing-row");
                        document.getElementById("example").style.overflowX="scroll";
                        document.getElementById("example").style.overflowY="scroll";
                    });
                }

                function checkLunchTime(timeSlot) {
                    // Define lunch time range
                    const lunchStart = "13:20";
                    const lunchEnd = "15:00";
                    
                    // Split the given time slot
                    const [startTime, endTime] = timeSlot.split("-");
                    var lunch=false;
                    // Check for overlap
                    if ((startTime < lunchEnd) && (endTime > lunchStart)) {
                        lunch=true;
                    }
                    return false;
                }

                function checkAndUpdateTimetable(svgElement,classCount,dayTimeString, classTitle,courseCode){
                     // parse DateTime string and make as many objects each of which is a class
                     // This will make pairs of day and time.
                     //console.log((courses[0].classDetails[0]).replaceAll(" ","")).split(")")
                     classes=dayTimeString.replaceAll(" ","").split(")");
                     let anyClashAtAll=false;
                     let clashLunch=false;
                     let clashCourse="";
                    //  console.log(classCount)
                     for(var i=0;i<parseInt(classCount);i++){
                        day = classes[i].split("-")[0];
                        time = (classes[i].split("(")[0]).split("-")[1]+"-"+(classes[i].split("(")[0]).split("-")[2];
                        venue=(classes[i].split("(")[1]);
                        if(checkClash(currentTimetable,day,time)[0]){
                            anyClashAtAll=true;
                            clashCourse=checkClash(currentTimetable,day,time)[1].split("\n")[0];
                        }
                        if(checkLunchTime(time)){
                            clashLunch=true;
                        }
                     }
                     if(classCount==0){
                        alert("Class has no published timings on the AMS.");
                     }
                     else if(anyClashAtAll){
                        alert("There is a clash with "+clashCourse);
                     } 
                    //  else if(clashLunch){
                    //     alert("There is a clash with lunch time.");
                    //  }  
                     else{
                        var inserted=[];
                        for(var i=0;i<classCount;i++){
                            day = classes[i].split("-")[0];
                            time = (classes[i].split("(")[0]).split("-")[1]+"-"+(classes[i].split("(")[0]).split("-")[2];
                            venue=(classes[i].split("(")[1]);
                            // console.log("day",day)
                            // console.log("time",time)
                            // console.log("venue",venue)
                            let insertedIndices = insertClass(currentTimetable, day, time, classTitle, courseCode+"( "+venue+" )");
                            inserted.push(insertedIndices);
                        }
                       
                        //const insertedIndices = insertClass(currentTimetable, day, timeSlot, classTitle, courseCode);
                        alertDiv=document.createElement("div");
                        let functionString = "";
                        for(var i=0;i<classCount;i++){
                            functionString+=`removeClass(${currentTimetable}, ${inserted[i].rowIndex}, ${inserted[i].colIndex});`;
                        }
                        alertDiv.innerHTML=
                        `<div style="text-align:left;width:100%;background-color:#faf6e3;color:black" class="alert alert-warning alert-dismissible fade show" role="alert">
                             ${classTitle.replaceAll(/&#39;/g, "'").replaceAll(/&#34;/g, '"')} <strong style="color:#d24b5c">(${courseCode})</strong>
                            <button onClick="`+
                            functionString
                            +`" type="button" class="closeAlert" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>`;
                        const table = document.getElementById("table-container"+currentTimetable);
                        table.parentElement.appendChild(alertDiv.firstChild);
                        danceRow(svgElement);
                        alert(courseCode+ " "+ classTitle.replaceAll(/&#39;/g, "'").replaceAll(/&#34;/g, '"') +" added to timetable");
                     }
                    }
                    
                    function insertClass(timetableNumber,day, timeSlot, className,codeAndProf) {
                        // console.log(timetableNumber,day, timeSlot, className,codeAndProf);
                        const dayIndex = days.indexOf(day);
                        const timeSlotIndex = timeSlots.indexOf(timeSlot);
                        const table = document.querySelector("#timetable" + timetableNumber);
                        
                        if (dayIndex === -1 || timeSlotIndex === -1) {
                            console.error("Invalid day or time slot");
                            return null;
                        }
                        const row = table.rows[timeSlotIndex + 1]; // +1 to account for header row
                        const cell = row.cells[dayIndex + 1]; // +1 to account for time column
                        const newCell = document.createElement("td");
                        newCell.className = "bg";
                        newCell.textContent = className.replaceAll(/&#39;/g, "'").replaceAll(/&#34;/g, '"');
                        newCell.style.position = "relative"; // Make the td a relatively positioned element
                        
                        newCell.innerHTML += `
                            <div style="color:#d24b5c;margin-top:5px;position: relative;">
                                ${codeAndProf}
                            </div>`;            
                        row.replaceChild(newCell, cell);

                        // Return the indices for future reference
                        return { rowIndex: timeSlotIndex + 1, colIndex: dayIndex + 1 };
                    }

                    function removeClass(timetableNumber, rowIndex, colIndex) {
                        const table = document.querySelector("#timetable" + timetableNumber);
                        const row = table.rows[rowIndex];
                        const cell = row.cells[colIndex];
                        // Clear the cell content and remove the 'bg' class
                        cell.innerHTML = "";
                        cell.classList.remove("bg");
                        if(rowIndex==4){
                            cell.classList.add("lunch");
                            replace = ["L","U","N","C","H"];
                            cell.innerText=replace[colIndex-1]
                        }

                    }


                    function showCoursePrerequisites(prerequisites) {
                        try {
                            var prereq = JSON.parse(atob(prerequisites));

                            var htmlContent = "<div>";

                            if (prereq.length > 0) {
                                htmlContent += "<h5>Following are the prerequisites for this course.</h5>";

                                var i = 1;

                                prereq.forEach(function(value) {
                                    if (i > 1) {
                                        htmlContent += "<p style='font-weight:bold'>" + value.OperatorUsed + "</p>";
                                    }

                                    if (value.PrerequisiteType === "RequiredCourses") {
                                        htmlContent += "</br><p style='font-weight:bold'>" + value.nOFm_Courses + " course(s) required from the following course(s).</p></br>";
                                        htmlContent += "<p>" + value.RequiredCourses + "</p>";
                                    } else if (value.PrerequisiteType === "LevelBased") {
                                        htmlContent += "</br><p style='font-weight:bold'>" + value.ComplexityLevel + " Level " + value.NoOfCourses + " course(s) required" + "</p>";
                                    } else if (value.PrerequisiteType === "MathRequired") {
                                        htmlContent += "</br><p style='font-weight:bold'>Mathematics required in XI or XII</p>";
                                    }

                                    i++;
                                });
                            } else {
                                htmlContent += "<p>No prerequisites</p>";
                            }
                            htmlContent += "</div>"
                            // Update the modal content
                            document.getElementById('modal-dps').innerHTML = htmlContent;

                        } catch (e) {
                            console.error("Invalid JSON string: ", e);
                        }
                    }

                    function showDescription(desc){
                        let decodedString = atob(desc);    
                        // Replace escaped newlines with actual newlines
                        decodedString = decodedString.replace(/\\n/g, '\n');
                        decodedString=decodedString.substring(1,decodedString.length-1)
                        
                        // Optionally handle other escaped characters
                        decodedString = decodedString.replace(/\\t/g, '\t');
                        if(decodedString.replaceAll(" ","")==""){
                            decodedString="No description available";
                        }
                        document.querySelector('#modal-dp').innerHTML=decodedString;
                    }

                    

            </script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

            <script>
                document.getElementById('download-snapshot').addEventListener('click', function() {
                  html2canvas(document.querySelector("#timetable"+currentTimetable)).then(canvas => {
                    let link = document.createElement('a');
                    link.href = canvas.toDataURL();
                    link.download = 'timetable.png';
                    link.click();
                  });
                });
              </script>
            <script src="/platform/assets/libs/jquery/dist/jquery.min.js"></script>
            <script src="/platform/assets/js/dataTables.js"></script>
           <!-- Bootstrap JS, Popper.js, and jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  
  <!-- <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap4.min.js"></script> -->
  <script>

    const codeEl = document.querySelector('#code');
    const typeEl = document.querySelector('#type');

    // Custom range filtering function
    DataTable.ext.search.push(function (settings, data, dataIndex) {
        let code = codeEl.value;
        let type = typeEl.value;

        let split;
        if (code.includes("&")) {
            split = code.split('&');
            split = split.map(function (element) {
                return element.trim() + "-";
            });
        } else {
            split = [code];
        }

        let split2;
        if (type.includes("&")) {
            split2 = type.split('&');
            split2 = split2.map(function (element) {
                return element.trim() + "-";
            });
        } else {
            split2 = [type];
        }

        let codedata = (data[1]) || "";
        let typedata = (data[1]) || ""; // Assuming type data is in the third column

        // Check if any element of split is in codedata
        let codeMatch = split.some(function (element) {
            return codedata.includes(element);
        });

        // Check if typedata matches the selected type
        let typeMatch = split2.some(function (element) {
            return typedata.includes(element);
        });

        if (
            (code == "Filter by Major" && type == "Filter by Type") ||
            (codeMatch && type == "Filter by Type") ||
            (code == "Filter by Major" && typeMatch) ||
            (codeMatch && typeMatch)
        ) {
            return true;
        }

        return false;
    });
    
    const table = new DataTable('#example');

    
    // Set the placeholder for the search input
    $('#example_filter label').innerHTML=`<input type="search" class="" placeholder="" aria-controls="example">`;
    $('#example_filter label input').attr('placeholder', 'Search Course or Professor');

    // Changes to the inputs will trigger a redraw to update the table
    codeEl.addEventListener('change', function () {
        table.draw();
    });
    typeEl.addEventListener('change', function () {
        table.draw();
    });
  </script>
            <script src="/platform/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
            <script src="/platform/assets/js/sidebarmenu.js"></script>
            <script src="/platform/assets/js/app.min.js"></script>
            <script src="/platform/assets/libs/simplebar/dist/simplebar.js"></script>
            <script src="/platform/assets/js/theme.js"></script>
            <!-- <%-include("../partials/preloader-js")%> -->
    </body>

</html>